---
layout: post
title: "Comparing Ember and React Components"
description: ""
category:
tags: []
---

{% include JB/setup %}

# Comment Box

Fridays here at Greenfield are personal improvement days. We spend the day
working on something of our own choice that will help us grow as developers. We
spent part of a recent Friday going through the [React Tutorial] as a team.
Since we're all [Ember] developers, this lead to us making lots of comparisons.

## Getting Started

We're going to use [ember-cli] to set up our app. This won't provide us with a
local API server to run like like in the source files provided by the React
tutorial but we'll use another tool to handle that later on.

If you don't already have [ember-cli] installed, head over to [Installing
Ember][installing-ember].

To get started, we're going to use ember-cli to generate our new Ember app:

```javascript
ember new ember-comment-box
```

Now we can start the local ember app and view it in our browser at
[http://localhost:4200](localhost):

```bash
cd ember-comment-box
ember server
```

## Your First Component

> React is all about modular, composable components

Great! So is Ember.

To recap what the component structure that we're going to be building looks
like, it's this:

```no-highlight
- CommentBox
  - CommentList
    - Comment
  - CommentForm
```

The first version of our `CommentBox` component only needs to display some text.
Since there's no logic required yet, we only need to create a template:

```handlebars
// app/templates/components/comment-box.hbs

Hello, world! I am a comment-box.
```

Now we can use our new component inside our `application.hbs` template:

```handlebars
// app/templates/application.hbs

{{comment-box}}
```

--- compare JSX and Handlebars ---

## Composing Components

Let's build skeletons for `{{comment-list}}` and `{{comment-form}}` components:

```handlebars
// app/templates/components/comment-list.hbs

Hello, world! I am a CommentList.
```

```handlebars
// app/templates/components/comment-form.hbs

Hello, world! I am a CommentForm.
```

Now we can use these new components inside our `{{comment-box}}` component:

```handlebars
// app/templates/components/comment-box.hbs

<h1>Comments</h1>
{{comment-list}}
{{comment-form}}
```

### Using Props

- Task: Create a `{{comment-list-item}}` component
- Task: Pass data from parent component to child `{{comment-list-item}}`
  component

In React, data passed to a component is available inside the component via
`this.props`. Ember handles this a little bit differently, setting data passed
to a component as properties directly on the component.

In a template, we can access any properties that are available on the
component:

NOTES: update the {{comment-list-item}} template to match

--- add info about why we need to use {{comment-list-item}} vs {{comment}} ---

```handlebars
// app/components/templates/comment-list-item.hbs

<h2>{{author}}</h2>

{{yield}}
```

--- explain yield ---

Now that we have our `{{comment-list-item}}` component, we can use it to display
some comments on the page:

```handlebars
// app/templates/components/comment-list.hbs

{{#comment-list-item author="Yehuda Katz"}}
  This is one comment
{{/comment-list-item}}

{{#comment-list-item author="Tom Dale"}}
  This is *another* comment
{{/comment-list-item}}
```

--- explain block form of the component && yield ---

### Adding Markdown

Just like in the React tutorial, we're going to use a 3rd party library,
[ember-markdown-it][ember-markdown-it] to convert our Markdown text to HTML.

Install the ember-markdown-it ember addon:

```bash
ember install ember-markdown-it
```

We can update our `{{comment-list}}` component to convert our comment 
content from Markdown to HTML:

```handlebars
// app/templates/components/comment-list.hbs

{{#comment-list-item author="Yehuda Katz"}}
  {{markdown-render "This is one comment"}}
{{/comment-list-item}}

{{#comment-list-item author="Tom Dale"}}
  {{markdown-render "This is *another* comment"}}
{{/comment-list-item}}
```

--- explain the markdown render helper and SafeString ---

### Hook Up the Data Model

- Task: Render comments from a blob of JSON data instead of 

It's time to remove the hard coded comment data in our template and use a blob
of JSON as our data source. This data will eventually from from a server but
we'll get to that later.

Since we're using ember-cli, and not writing this app in a global context, we're
not going to be able to just create a global variable with our comment data.
We're instead going to override the `init()` hook in our `{{comment-box}}`
component:

```javascript
// app/components/comment-box.js

import Ember from 'ember';

const { Component } = Ember;

export default Component.extend({
  init() {
    this._super(...arguments);

    this.data = [
      { id: 1, author: 'Yehuda Katz', text: 'This is one comment' },
      { id: 2, author: 'Tom Dale', text: 'This is *another* comment' }
    ];
  }
});
```

Whenever an instance of a component is created, its `init()` function will be
called. We need to call `this._super(...arguments)` when we override the
function in order to make sure that the component's usual initialization steps
still take place. Next we set the `data` property of our component to be the
array of comments that we want to display in our template.

Now that our comment data is available as a property of our component, we can
use that in our template:

```handlebars
// app/templates/components/comment-box.hbs

<h1>Comments</h1>
{{comment-list data=data}}
{{comment-form}}
```

Here we're passing the comment `data` from the context of our `{{comment-box}}`
component to its child `{{comment-list}}` component as another property called
`data`.

The finally step here is to replace our hard coded comment data in the template
of our `{{comment-list}}` component with the `data` being passed in:

```handlebars
{{#each data as |comment|}}
  {{#comment-list-item author=comment.author}}
    {{markdown-render comment.text}}
  {{/comment-list-item}}
{{/each}}
```

We use the `{{#each}}` helper here to iterate over each of the items in our
`data`. Inside the `{{#each}}` block we replace our hard coded strings with
references to properties of the comment that we're currently iterating over.

[react-tutorial]: https://facebook.github.io/react/docs/tutorial.html
[installing-ember]: https://guides.emberjs.com/v2.4.0/getting-started/
[localhost]: http://localhost:4200
[ui-markdown]: https://github.com/lifegadget/ui-markdown
